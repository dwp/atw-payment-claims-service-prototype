{% extends "layout.html" %}

{% block pageTitle %}
Claim money back from Access to Work
{% endblock %}

{% set travelLength %}
{{ data.travel | length }}
{% endset %}

{% set taxiTotal = 0 %}
{% for day in data.travel %}
{% set taxiTotal = taxiTotal | float + day.travel_journeys | float %}
{% else %}
{% set taxiTotal = 0 | float %}
{% endfor %}



{% set repeattaxiTotal = 0 %}
{% for day in data.repeattravel %}
{% set repeattaxiTotal = repeattaxiTotal | float + day.repeattravel_journeys | float %}
{% else %}
{% set repeattaxiTotal = 0 | float %}
{% endfor %}

{% set taxiinworkTotal = 0 %}
{% for day in data.travel %}
{% set taxiinworkTotal = taxiinworkTotal | float + day.travel_cost | float %}
{% else %}
{% set taxiTotal = 0 | float %}
{% endfor %}

{% set repeattaxiinworkTotal = 0 %}
{% for day in data.repeattravel %}
{% set repeattaxiinworkTotal = repeattaxiinworkTotal | float + day.repeattravel_cost | float %}
{% else %}
{% set repeattaxiTotal = 0 | float %}
{% endfor %}


{% block content %}

{% if data["ttw-cost-errors"]|length %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{{ govukErrorSummary({
titleText: "There is a problem",
errorList: data["ttw-cost-errors"]
}) }}
{% endif %}


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">
      Taxi costs</h1>
    <p>Tell us the total cost of taxi journeys for this claim.
      <br />
      <br />Do not deduct any amounts you or your employer have agreed to contribute.
    </p>

    <form action="taxi-cost-answer" method="post" class="form">

      {% if data["ttw-cost-errors"]|length %}
      <div class="govuk-form-group govuk-form-group--error">

        {% if taxiTotal === 1 %}
        <label class="govuk-label govuk-label--m" for="cost-of-taxi">
          How much did your taxi journey cost in total?
        </label>
        </h1>
        {% else %}
        <label class="govuk-label govuk-label--m" for="cost-of-taxi">
          How much did your taxi journeys cost in total, in pounds?
        </label>
        </h1>
        {% endif %}
        <p id="cost-error" class="govuk-error-message">
          <span class="govuk-visually-hidden">Error:</span> {{data["ttw-cost-errors"][0].message}}
        </p>
        <div class="govuk-input__wrapper">
          <div class="govuk-input__prefix" aria-hidden="true">£</div>
          <input class="govuk-input govuk-input--error govuk-input--width-5" id="cost-of-taxi" name="cost-of-taxi" type="text" aria-describedby="cost-error"
            value="{{data['cost-of-taxi']}}" spellcheck="false">
        </div>
      </div>

      {% else %}

      <div class="govuk-form-group">

        {% if taxiTotal === 1 %}
        <label class="govuk-label govuk-label--m" for="cost-of-taxi">
          How much did your taxi journey cost in total?
        </label>
        </h1>
        {% else %}
        <label class="govuk-label govuk-label--m" for="cost-of-taxi">
          How much did your taxi journeys cost in total, in pounds?
        </label>
        </h1>
        {% endif %}

        <div class="govuk-input__wrapper">
          <div class="govuk-input__prefix" aria-hidden="true">£</div>
          <input class="govuk-input govuk-input--width-5" id="cost-of-taxi" name="cost-of-taxi" type="text"
            value="{{data['cost-of-taxi']}}" spellcheck="false">
        </div>
      </div>

      {% endif %}

      <button type="submit" class="govuk-button" data-module="govuk-button">
        Continue
      </button>

    </form>
  </div>
</div>


{% endblock %}